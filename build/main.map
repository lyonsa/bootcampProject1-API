{"version":3,"sources":["webpack:///webpack/bootstrap 3f18c63b4d59dd3ca582","webpack:///external \"boom\"","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"axios\"","webpack:///./src/index.js","webpack:///external \"express\"","webpack:///external \"morgan\"","webpack:///external \"helmet\"","webpack:///external \"hpp\"","webpack:///external \"cors\"","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///./src/routes/index.js","webpack:///./src/routes/game.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"express-promise-router\"","webpack:///./src/utils/index.js","webpack:///./src/utils/make-query.js","webpack:///./src/utils/fetch-questions.js","webpack:///./src/middleware/index.js","webpack:///./src/middleware/error-handler.js","webpack:///./src/middleware/not-found.js"],"names":["routes","middleware","PROD","PORT","process","env","app","use","json","disable","gameRoute","notFound","errorHandler","listen","on","console","error","err","default","router","post","req","res","next","body","uid1","uid2","category","difficulty","query","questions","status","success","BASE_URL","difficulties","categoryMapper","cat","url","diff","indexOf","queryUrl","get","data","response_code","Error","results","$err","isBoom","output","payload","message","statusCode","stack"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3f18c63b4d59dd3ca582","module.exports = require(\"boom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"boom\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 2\n// module chunks = 0","import express from 'express'\nimport morgan from 'morgan'\nimport helmet from 'helmet'\nimport hpp from 'hpp'\nimport cors from 'cors'\nimport bodyParser from 'body-parser'\nimport compression from 'compression'\n\nimport * as routes from './routes'\nimport * as middleware from './middleware'\n\nconst PROD = process.env.NODE_ENV === 'production'\nconst PORT = process.env.PORT || 3000\n\n// initalize express app\nconst app = express()\n\n// mount middleware\napp\n\t.use(helmet())\n\t.use(hpp())\n\t.use(compression())\n\t.use(morgan(PROD ? 'combined' : 'dev'))\n\t.use(bodyParser.json())\n\t.use(cors())\n\n// disable some headers\napp\n\t.disable('x-powered-by')\n\t.disable('etag')\n\n// mount routes\napp\n\t.use('/game', routes.gameRoute)\n\t.use(middleware.notFound)\n\t.use(middleware.errorHandler)\n\n// listen for traffic\napp.listen(PORT)\n\nprocess.on('uncaughtException', err => console.error(err))\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"helmet\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"hpp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hpp\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 11\n// module chunks = 0","export { default as gameRoute } from './game'\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","import Router from 'express-promise-router'\nimport axios from 'axios'\nimport boom, { badRequest } from 'boom'\n\nimport { makeQuery, fetchQuestions } from '../utils'\n\nconst router = Router()\n\n/**\n * Start game route\n * POST `/game/start-game`\n * (public)\n */\nrouter.post('/start-game', async (req, res, next) => {\n\t// get parameters\n\tconst { uid1, uid2, category, difficulty } = req.body\n\t// validate parameters\n\tif (!uid1) {\n\t\tnext(badRequest('uid1 is required'))\n\t} else if (!uid2) {\n\t\tnext(badRequest('uid2 is required'))\n\t} else if (!category) {\n\t\tnext(badRequest('category is required'))\n\t}\n\t// make query url\n\tconst query = makeQuery(category, difficulty)\n\t// fetch questons\n\tconst questions = await fetchQuestions(query)\n\tres.status(201).json({\n\t\tquestions,\n\t\tsuccess: true,\n\t})\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/game.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"express-promise-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-promise-router\"\n// module id = 15\n// module chunks = 0","export { default as makeQuery } from './make-query'\nexport { default as fetchQuestions } from './fetch-questions'\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","import { badRequest } from 'boom'\n\nconst BASE_URL = 'https://opentdb.com/api.php?amount=5'\n\n// @enum \nconst difficulties = [\n\t'easy',\n\t'medium',\n\t'hard'\n]\n\n// map category to number for trivia api\nconst categoryMapper = (category) => {\n\tswitch (category) {\n\t\tcase 'general': return 9\n\t\tcase 'books': return 10\n\t\tcase 'film': return 11\n\t\tcase 'music': return 12\n\t\tcase 'television': return 14\n\t\tcase 'video games': return 15\n\t\tcase 'board games': return 16\n\t\tcase 'computer science': return 18\n\t\tcase 'mathematics': return 19\n\t\tcase 'mythology': return 20\n\t\tcase 'sports': return 21\n\t\tcase 'geography': return 22\n\t\tdefault: throw badRequest('invalid category')\n\t}\n}\n\nexport default (category = 'general', difficulty) => {\n\t// map category parameter\n\tconst cat = categoryMapper(category)\n\t// form url\n\tlet url = `${BASE_URL}&category=${cat}`\t\n\t// optionally add difficulty param\n\tconst diff = difficulties[difficulties.indexOf(difficulty)]\n\tif (diff) url += `&difficulty=${diff}`\n\t// return formatted url\n\treturn url\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/make-query.js","import axios from 'axios'\nimport boom, { badGateway } from 'boom'\n\nexport default async (queryUrl) => {\n\ttry {\n\t\t// get request\n\t\tconst { data } = await axios.get(queryUrl)\n\t\t// check response code\n\t\tif (data.response_code !== 0) throw new Error()\n\t\t// return results\n\t\treturn data.results\n\t} catch (err) {\n\t\t// rethrow as external error\n\t\tthrow badGateway('error fetching questions')\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/fetch-questions.js","export { default as errorHandler } from './error-handler'\nexport { default as notFound } from './not-found'\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/index.js","import boom, { badImplementation } from 'boom'\n\nexport default ($err, req, res, next) => {\n\t// get boom error\n\t// convert to error 500 if not boom error\n  const err = $err.isBoom ? $err : badImplementation('Something broke ):')\n  const { message, statusCode, error } = err.output.payload\n  // log error\n\tconsole.error(`${error}: ${message}`)\n\tconsole.error($err.stack)\n  res.status(statusCode).json({\n    error,\n    message,\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/error-handler.js","import { notFound } from 'boom'\n\nexport default (req, res, next) => {\n  next(notFound('The endpoint you requested was not found.'))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/not-found.js"],"sourceRoot":""}